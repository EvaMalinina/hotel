Date.prototype.toDateInputValue=function(){const a=new Date(this);return a.setMinutes(this.getMinutes()-this.getTimezoneOffset()),a.toJSON().slice(0,10)};let startDate=document.getElementById("start-trip"),checkIn=startDate.value=new Date().toDateInputValue();startDate.setAttribute("min",checkIn);let nextDay=new Date;nextDay.setDate(nextDay.getDate()+1);let endDay=document.getElementById("end-trip"),checkOut=endDay.value=nextDay.toJSON().slice(0,10);endDay.setAttribute("min",checkOut),window.addEventListener("load",()=>{loadData(),generateAll(),slide(),zoomIn(),selectFilter(),paginate()});let customeFilter={type:"all",type:"room",type:"suite"},createFlat=(a,b)=>{let c=document.createElement("div");wrapperPic=document.createElement("div"),pic=document.createElement("div"),btnLeft=document.createElement("a"),btnRight=document.createElement("a"),title=document.createElement("h4"),exampleFeatures=document.createElement("div"),features=document.createElement("ul"),featuresItemSize=document.createElement("li"),featuresNumber=document.createElement("p"),featuresText=document.createElement("p"),featuresItemGuest=document.createElement("li"),featuresGuest=document.createElement("p"),featuresGuestDesc=document.createElement("p"),featuresItemBed=document.createElement("li"),featuresNumBed=document.createElement("p"),featuresBedDesc=document.createElement("p"),exampleLink=document.createElement("a"),c.className="example",b.className="overview__example",b.appendChild(c),wrapperPic.className="example__pic-wrap",pic.className="example__pic",btnLeft.className="example__left",btnRight.className="example__right",wrapperPic.append(pic,btnLeft,btnRight),pic.innerHTML=a.pic,btnLeft.innerHTML="<",btnRight.innerHTML=">",title.className="example__title",title.innerHTML=a.name,exampleFeatures.className="example__features",exampleFeatures.appendChild(features),features.className="features",features.append(featuresItemSize,featuresItemGuest,featuresItemBed),featuresItemSize.className="features__item",featuresItemGuest.className="features__item",featuresItemBed.className="features__item",featuresItemSize.append(featuresNumber,featuresText),featuresItemGuest.append(featuresGuest,featuresGuestDesc),featuresItemBed.append(featuresNumBed,featuresBedDesc),featuresNumber.className="features__number",featuresGuest.className="features__number",featuresNumBed.className="features__number",featuresNumber.innerHTML=a.features.msq,featuresGuest.innerHTML=a.features.guestNumber,featuresNumBed.innerHTML=a.features.bedroom,featuresText.className="features__text",featuresGuestDesc.className="features__text",featuresBedDesc.className="features__text",featuresText.innerHTML=a.features.msqDesc,featuresGuestDesc.innerHTML=a.features.guestNumberDesc,featuresBedDesc.innerHTML=a.features.bedroomDesc,exampleLink.className="example__link",exampleLink.innerHTML=a.link,c.append(wrapperPic,title,exampleFeatures,exampleLink)},generateAll=()=>{let a=JSON.parse(localStorage.getItem("locData")),b=document.querySelector(".overview__examples");for(let c of a){let a=document.createElement("li");a.className="overview__example",b.appendChild(a),createFlat(c,a)}},filterRooms=()=>{let a=JSON.parse(localStorage.getItem("locData"));const b=document.getElementById("type").value,c="all"===b?a:a.filter(a=>a.type===b);return c},paginate=()=>{let a=document.querySelector(".pagination");a.innerHTML="";let b=filterRooms(),c=2,d=Math.ceil(b.length/c),e=function(){let a;return function(d){a&&a.classList.remove("active"),a=d,d.classList.add("active");let e=+d.innerHTML,f=(e-1)*c,g=b.slice(f,f+c),h=document.querySelector(".overview__examples");h.innerHTML="";for(let a of g){let b=document.createElement("li");b.className="overview__example",h.appendChild(b),createFlat(a,b)}slide(),zoomIn()}}(),f=[];for(let b,c=1;c<=d;c++)b=document.createElement("li"),b.innerHTML=c,a.appendChild(b),f.push(b);e(f[0]);for(let a of f)a.addEventListener("click",function(){e(this)})},selectFilter=()=>{let a=document.getElementById("type");a.addEventListener("change",()=>{customeFilter.type=a.value,filterRooms(),paginate()})};function loadData(){const a=new XMLHttpRequest;a.open("GET","../data/flats.json",!0),a.onload=function(){if(200<=a.status&&400>a.status){const b=JSON.parse(a.responseText),c=JSON.stringify(b);localStorage.setItem("locData",c)}else console.log("There is a problem in .json file")},a.onerror=function(){console.log("connection error")},a.send()}window.addEventListener("load",()=>{const a=document.querySelector(".hero");let b=()=>{window.scrollTo(0,0)};(()=>{document.getElementById("menu-open").addEventListener("click",function(){"hero"==a.className?(a.classList.add("hero_fullmenu"),window.addEventListener("scroll",b)):"hero hero_fullmenu"==a.className&&(a.classList.remove("hero_fullmenu"),window.removeEventListener("scroll",b))})})(),(()=>{document.getElementById("booking-open").addEventListener("click",function(){"hero"==a.className?(a.classList.add("hero_fullbook"),window.addEventListener("scroll",b)):"hero hero_fullbook"==a.className&&(a.classList.remove("hero_fullbook"),window.removeEventListener("scroll",b))})})()});let registration=()=>{let a=document.getElementById("register-link");a.addEventListener("click",()=>{let a=document.getElementById("registration");a.style.display="flex"})};registration();let login=()=>{let a=document.getElementById("login-link");a.addEventListener("click",()=>{let a=document.getElementById("login");a.style.display="flex"})};login();let search=()=>{let inpt=document.getElementById("search-this"),main=document.querySelector(".main").innerHTML,cancel=document.querySelector(".search__cancel"),doSearch=document.querySelector(".search__go");cancel.addEventListener("click",a=>{a.preventDefault(),inpt.value="",document.querySelector(".main").innerHTML=main,window.location=""}),doSearch.addEventListener("click",e=>{if(e.preventDefault(),searchOnPage="/"+inpt.value+"/g",content=document.querySelector("main").innerHTML,result=content.match(/>(.*?)</gi),result_arr=[],2>=inpt.value.length)alert("You need to write more then 2 characters to search!"),document.querySelector(".main").innerHTML=main,window.location="";else if(3<=inpt.value.length){for(let i=0;i<result.length;i++)result_arr[i]=result[i].replace(eval(searchOnPage),"<span style=\"background-color:yellow;\">"+inpt.value+"</span>");for(let a=0;a<result.length;a++)content=content.replace(result[a],result_arr[a]);document.querySelector("main").innerHTML=content,window.location="#"+inpt.value}})};search();let slide=()=>{Array.from(document.querySelectorAll("div.example__pic"),a=>{const b=a.parentNode.querySelector(".example__left"),c=a.parentNode.querySelector(".example__right");b&&b.addEventListener("click",()=>{let b=a.style.backgroundPositionX;b=/-?\d+/.exec(b);a.style.backgroundPositionX=`${b- -230}`+"px",a.style.transition="0.8s"}),c&&c.addEventListener("click",b=>{b.preventDefault();let c=a.style.backgroundPositionX;c=/-?\d+/.exec(c);a.style.backgroundPositionX=`${c-230}`+"px",a.style.transition="0.6s"})})},zoomIn=()=>{Array.from(document.querySelectorAll("div.example__pic-wrap"),a=>{const b=a.querySelector(".example__pic");b.addEventListener("click",b=>{b.preventDefault(),a.classList.toggle("wrap-active")})})};